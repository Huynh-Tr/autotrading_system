graph TB
    %% Data Layer
    subgraph "Data Layer"
        MD[Market Data<br/>Yahoo Finance, VNStock]
        HC[Historical Data Cache]
        RT[Real-time Price Feeds]
        CF[Configuration Files]
    end
    
    %% Core Layer
    subgraph "Core Layer"
        DM[Data Manager<br/>Data fetching, caching, validation]
        TE[Trading Engine<br/>Order execution, portfolio management]
        CM[Configuration Manager<br/>Settings, parameters]
        LM[Logging & Monitoring<br/>Performance tracking]
    end
    
    %% Strategy Layer
    subgraph "Strategy Layer"
        SMA[SMA Crossover Strategy]
        RSI[RSI Strategy]
        MACD[MACD Strategy]
        CS[Custom Strategies]
    end
    
    %% Technical Indicators
    subgraph "Technical Indicators"
        SMA_I[SMA<br/>Simple Moving Average]
        RSI_I[RSI<br/>Relative Strength Index]
        MACD_I[MACD<br/>Moving Average Convergence]
        BB[Bollinger Bands]
    end
    
    %% Risk Management Layer
    subgraph "Risk Management Layer"
        PS[Position Sizing<br/>Risk-based allocation]
        SL[Stop Loss & Take Profit<br/>Automatic execution]
        PRL[Portfolio Risk Limits<br/>Maximum exposure]
        DM_R[Drawdown Monitoring<br/>Real-time tracking]
    end
    
    %% Backtesting Layer
    subgraph "Backtesting Layer"
        BE[Backtest Engine<br/>Multi-strategy testing]
        PM[Performance Metrics<br/>Sharpe, drawdown, win rate]
        TT[Trade Tracking<br/>Complete history, analysis]
        RI[Risk Integration<br/>Risk metrics in backtesting]
    end
    
    %% Optimization Layer
    subgraph "Optimization Layer"
        PG[Parameter Grid<br/>Strategy parameter combinations]
        SO[Strategy Optimizer<br/>Risk-based optimization]
        PP[Parallel Processing<br/>Efficient multi-core execution]
        RA[Results Analysis<br/>Top parameters, reports]
    end
    
    %% Dashboard Layer
    subgraph "Dashboard Layer"
        WD[Web Dashboard<br/>Streamlit-based monitoring]
        TC[Trading Charts<br/>Interactive OHLC charts]
        PR[Performance Reports<br/>Detailed analysis]
        RTM[Real-time Monitoring<br/>Live updates]
    end
    
    %% Output Layer
    subgraph "Output Layer"
        OS[Optimized Strategies<br/>Best parameters]
        BR[Backtest Results<br/>Performance data]
        RR[Risk Reports<br/>Risk metrics, alerts]
        TS[Trading Signals<br/>Buy/sell decisions]
    end
    
    %% Data Flow Connections
    MD --> DM
    HC --> DM
    RT --> TE
    CF --> CM
    
    DM --> SMA
    TE --> RSI
    CM --> MACD
    LM --> CS
    
    SMA --> SMA_I
    RSI --> RSI_I
    MACD --> MACD_I
    CS --> BB
    
    SMA --> PS
    RSI --> SL
    MACD --> PRL
    CS --> DM_R
    
    PS --> BE
    SL --> PM
    PRL --> TT
    DM_R --> RI
    
    SMA --> PG
    RSI --> SO
    MACD --> PP
    CS --> RA
    
    BE --> WD
    PM --> TC
    TT --> PR
    RI --> RTM
    
    PG --> PR
    SO --> RTM
    
    WD --> OS
    TC --> BR
    PR --> RR
    RTM --> TS
    
    %% Styling
    classDef dataLayer fill:#E3F2FD,stroke:#333,stroke-width:2px
    classDef coreLayer fill:#F3E5F5,stroke:#333,stroke-width:2px
    classDef strategyLayer fill:#E8F5E8,stroke:#333,stroke-width:2px
    classDef riskLayer fill:#FFF3E0,stroke:#333,stroke-width:2px
    classDef backtestLayer fill:#FCE4EC,stroke:#333,stroke-width:2px
    classDef optimizationLayer fill:#F1F8E9,stroke:#333,stroke-width:2px
    classDef dashboardLayer fill:#E0F2F1,stroke:#333,stroke-width:2px
    classDef outputLayer fill:#F9FBE7,stroke:#333,stroke-width:2px
    
    class MD,HC,RT,CF dataLayer
    class DM,TE,CM,LM coreLayer
    class SMA,RSI,MACD,CS strategyLayer
    class PS,SL,PRL,DM_R riskLayer
    class BE,PM,TT,RI backtestLayer
    class PG,SO,PP,RA optimizationLayer
    class WD,TC,PR,RTM dashboardLayer
    class OS,BR,RR,TS outputLayer